<schema name="Business" database="MyCo" xmlns="http://sqlfairy.sourceforge.net/sqlfairy.xml">
<comments>The MIT License (MIT) Copyright (c) 2014-2015 Stephen A Jazdzewski</comments>

<tables>
<table name="Culture" order="1">
<fields>
 <field name="code" data_type="integer" size="" is_nullable="0" is_auto_increment="0" is_primary_key="1" is_foreign_key="1" order="2">
  <comments>Like 1033 http://msdn.microsoft.com/en-us/library/ee825488(v=cs.20).aspx</comments></field>
 <field name="name" data_type="varchar" size="9" is_nullable="0" is_auto_increment="0" is_primary_key="0" order="3">
  <comments>Like en-US</comments></field>
</fields>
<indices>
</indices>
</table>

<table name="Word" order="2">
<comments>Word records with null culture values are identifiers.  Identifiers are managed with the GetIdentifier functions instead of GetWord.</comments>
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="0" is_foreign_key="0" order="1" />
 <field name="culture" data_type="integer" size="" is_nullable="1" is_foreign_key="1" default_value="1033" order="2" />
 <field name="value" data_type="varchar" size="20" is_nullable="0" order="3" />
</fields>
<indices>
 <index name="word_id_culture" type="NORMAL" fields="id,culture" />
</indices>
<constraints>
 <constraint name="" type="FOREIGN KEY" fields="culture" reference_table="Culture" reference_fields="code" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
</constraints>
<comments></comments>
</table>

<table name="Sentence" order="3">
<comments>Sentence records with null culture values are identity phrases.  Phrases are managed with the GetIdentityPhrase.</comments>
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="0" is_foreign_key="0" order="1" />
 <field name="culture" data_type="integer" size="" is_nullable="1" is_foreign_key="1" default_value="1033" order="2" />
 <field name="value" data_type="varchar" size="256" is_nullable="0" order="3" />
 <field name="length" data_type="smallint" size="3" is_nullable="1" order="4" >
  <comments>Used for dynamic drop list item sorting</comments>
 </field>
</fields>
<indices>
 <index name="sentence_id_culture" type="NORMAL" fields="id,culture" />
 <index name="sentence_culture_value" type="UNIQUE" fields="culture,value" />
</indices>
<constraints>
 <constraint name="" type="FOREIGN KEY" fields="culture" reference_table="Culture" reference_fields="code" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
</constraints>
<comments></comments>
</table>

<table name="Paragraph" order="4">
<comments>untested</comments>
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="0" is_foreign_key="0" order="1" />
 <field name="culture" data_type="integer" size="" is_nullable="1" is_foreign_key="1" default_value="1033" order="2" />
 <field name="value" data_type="text" size="0" is_nullable="0" order="3" />
</fields>
<indices>
 <index name="paragraph_id_culture" type="NORMAL" fields="id,culture" />
 <index name="paragraph_culture_value" type="UNIQUE" fields="culture,value" />
</indices>
<constraints>
 <constraint name="" type="FOREIGN KEY" fields="culture" reference_table="Culture" reference_fields="code" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
</constraints>
<comments></comments>
</table>

<table name="Timezone" order="10">
<fields>
 <field name="name" data_type="varchar" size="40" is_nullable="0" is_primary_key="1" is_foreign_key="1" order="1" />
 <field name="abbrev" data_type="varchar" size="8" is_nullable="0" is_primary_key="0" order="2" />
 <field name="utc_offset" data_type="interval" size="" is_nullable="0" is_auto_increment="0" order="3" />
 <field name="is_dst" data_type="smallint" size="1" is_nullable="0" order="4" />
</fields>
<indices>
 <index name="timezone_name" type="UNIQUE" fields="name" />
</indices>
</table>

<table name="Area" order="11">
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="1" order="1">
  <comments>Reserve the DMA codes</comments>
 </field>
 <field name="name" data_type="integer" size="" is_nullable="0" order="2" />
 <comments>Add this field if using GIS</comments>
 <comments invalid=""><field name="shape" data_type="GEOMETRY" size="" is_nullable="1" order="3" /></comments>
 <field name="timezone" data_type="varchar" size="40" is_nullable="1" order="4" />
</fields>
<constraints>
 <constraint name="area_timezone" type="FOREIGN KEY" fields="timezone" reference_table="Timezone" reference_fields="name" deferrable="1" />
 <comments invalid=""><constraint name="invalid0" type="FOREIGN KEY" fields="name" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
</constraints>
<indices>
 <index name="area_name" type="UNIQUE" fields="name" />
</indices>
</table>

<table name="Location" order="12">
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="1" order="1" />
 <field name="parent" data_type="integer" size="" is_nullable="1" order="2" />
 <field name="marquee" data_type="integer" size="" is_nullable="1" order="3" />
 <field name="latitude" data_type="float" size="24" is_nullable="1" order="4" />
 <field name="longitude" data_type="float" size="24" is_nullable="1" order="5" />
 <field name="accuracy" data_type="integer" size="" is_nullable="1" order="6">
  <comments>From GeoNames.org accuracy of lat/lng from 1=estimated to 6=centroid</comments>
 </field>
 <field name="level" data_type="integer" size="" is_nullable="0" default_value="1" order="7">
  <comments>Floor. Negative numbers for basements</comments>
 </field>
 <field name="altitudeAboveSeaLevel" data_type="integer" size="" is_nullable="1" order="8">
  <comments>In meters</comments>
 </field>
 <field name="area" data_type="integer" size="" is_nullable="1" order="9" >
  <comments>For timezone information for small locations</comments>
 </field>
</fields>
<constraints>
 <constraint name="location_area" type="FOREIGN KEY" fields="area" reference_table="Area" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
 <comments invalid=""><constraint name="invalid0" type="FOREIGN KEY" fields="marquee" reference_table="Sentence" reference_fields="id" deferrable="1" /></comments>
</constraints>
</table>

<table name="Given" order="18">
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="1" order="1" />
 <field name="value" data_type="varchar" size="25" is_nullable="0" order="3" />
</fields>
<indices>
 <index name="given_value" type="UNIQUE" fields="value" />
</indices>
<constraints>
</constraints>
<comments></comments>
</table>

<table name="Family" order="19">
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="1" order="1" />
 <field name="value" data_type="varchar" size="25" is_nullable="0" order="3" />
</fields>
<indices>
 <index name="family_value" type="UNIQUE" fields="value" />
</indices>
<constraints>
</constraints>
<comments></comments>
</table>

<table name="Name" order="20">
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="1" order="1" />
 <field name="given" data_type="integer" size="" is_nullable="1" is_foreign_key="1" order="3" />
 <field name="middle" data_type="integer" size="" is_nullable="1" is_foreign_key="1" order="4" />
 <field name="family" data_type="integer" size="" is_nullable="1" is_foreign_key="1" order="5" />
</fields>
<indices>
 <index name="name_given_middle_family" type="UNIQUE" fields="given,middle,family" />
</indices>
<constraints>
 <constraint name="" type="FOREIGN KEY" fields="given" reference_table="Given" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
 <constraint name="" type="FOREIGN KEY" fields="middle" reference_table="Given" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
 <constraint name="" type="FOREIGN KEY" fields="family" reference_table="Family" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
</constraints>
</table>

<table name="Entity" order="21">
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="1" order="1" />
 <field name="name" data_type="varchar" size="50" is_nullable="1" order="2" />
</fields>
<constraints>
</constraints>
</table>

<table name="Individual" order="22">
<fields>
 <field name="id" data_type="bigint" size="" is_nullable="0" is_auto_increment="1" is_primary_key="0" order="1">
  <comments>One or more entries for specific individuals.  Records WHERE nameChange IS NULL are the current records for any specific individual id.</comments>
 </field>
 <field name="name" data_type="integer" size="" order="2" />
 <field name="entity" data_type="integer" size="" order="3" />
 <field name="prefix" data_type="integer" size="" is_nullable="1" order="4" />
 <field name="suffix" data_type="integer" size="" is_nullable="1" order="5" />
 <field name="post" data_type="integer" size="" is_nullable="1" order="6" />
 <field name="goesBy" data_type="integer" size="" is_nullable="1" order="7" />
 <field name="birth" data_type="timestamp" size="0" is_nullable="1" order="8">
  <comments>Consider birth and death being event attributes with location, thus time zone information.</comments>
 </field>
 <field name="nameChange" data_type="timestamp" size="0" is_nullable="1" order="9" />
 <field name="death" data_type="timestamp" size="0" is_nullable="1" order="10" />
 <field name="location" data_type="integer" size="" is_nullable="1" order="11" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="12" />
</fields>
<indices>
 <index name="individual_id" type="NORMAL" fields="id" />
</indices>
<constraints>
 <constraint name="" type="FOREIGN KEY" fields="name" reference_table="Name" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
 <constraint name="" type="FOREIGN KEY" fields="entity" reference_table="Entity" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
 <constraint name="" type="FOREIGN KEY" fields="goesBy" reference_table="Given" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
 <comments invalid=""><constraint name="invalid0" type="FOREIGN KEY" fields="prefix" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
 <comments invalid=""><constraint name="invalid1" type="FOREIGN KEY" fields="suffix" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
 <comments invalid=""><constraint name="invalid2" type="FOREIGN KEY" fields="post" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
 <constraint name="" type="FOREIGN KEY" fields="location" reference_table="Location" reference_fields="id" deferrable="1" />
</constraints>
</table>

<table name="Email" order="25">
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="1" order="1" />
 <field name="username" data_type="varchar" size="30" is_nullable="0" order="2" />
 <field name="plus" data_type="varchar" size="30" is_nullable="1" order="3" />
 <field name="host" data_type="varchar" size="30" is_nullable="0" order="4" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="5" />
</fields>
<constraints>
</constraints>
</table>

<table name="Path" order="26">
<fields>
 <field name="id" data_type="bigint" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="1" order="1" />
 <field name="protocol" data_type="varchar" size="4" is_nullable="0" order="2" />
 <field name="secure" data_type="smallint" size="1" is_nullable="0" default_value="0" order="3" />
 <field name="host" data_type="varchar" size="64" is_nullable="1" order="4" />
 <field name="value" data_type="varchar" size="256" is_nullable="1" order="5" />
 <field name="get" data_type="varchar" size="256" is_nullable="1" order="6" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
</table>

<table name="IndividualList" order="30">
<fields>
 <field name="id" data_type="integer" size="" is_nullable="1" order="1">
  <comments>NULL applies to all lists.</comments>
 </field>
 <field name="unlist" data_type="timestamp" size="0" is_nullable="1" order="2">
  <comments>Not NULL to remove from list</comments>
 </field>
 <field name="individual" data_type="bigint" size="" is_nullable="0" order="3" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="4" />
</fields>
<constraints>
 <comments invalid=""><constraint name="invalid0" type="FOREIGN KEY" fields="individual" reference_table="Individual" reference_fields="id" deferrable="1" /></comments>
</constraints>
</table>

<table name="IndividualListName" order="31">
<fields>
 <field name="individualList" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="1" order="1" />
 <field name="name" data_type="integer" size="" is_nullable="0" order="2" />
 <field name="set" data_type="integer" size="" order="3" />
 <field name="sequence" data_type="smallint" size="5" order="4">
  <comments>Order in a displayed list.</comments>
 </field>
 <field name="optinStyle" data_type="smallint" size="1" is_nullable="0" order="5">
  <comments>Optin or optout style list.</comments>
 </field>
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
<indices>
 <index name="individuallistname_name_set" type="UNIQUE" fields="name,set" />
</indices>
<constraints>
 <comments invalid=""><constraint name="invalid0" type="FOREIGN KEY" fields="individualList" reference_table="IndividualList" reference_fields="id" deferrable="1" /></comments>
 <comments invalid=""><constraint name="invalid1" type="FOREIGN KEY" fields="name" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
 <comments invalid=""><constraint name="invalid2" type="FOREIGN KEY" fields="set" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
</constraints>
</table>

<table name="IndividualPath" order="50">
<comments>Web Site, Social page, feed etc.</comments>
<fields>
 <field name="individual" data_type="bigint" size="" is_nullable="1" order="1" />
 <field name="type" data_type="integer" size="" is_nullable="1" order="3" />
 <field name="path" data_type="bigint" size="" is_nullable="1" order="4" />
 <field name="track" data_type="varchar" size="30" is_nullable="1" order="5">
  <comments>Added to end of path in the Get section for tracking links to same path</comments>
 </field>
 <field name="stop" data_type="timestamp" size="0" is_nullable="1" order="6">
  <comments>No longer associate this record with individual.  Used instead of DELETE.</comments>
 </field>
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
<constraints>
 <constraint name="" type="FOREIGN KEY" fields="path" reference_table="Path" reference_fields="id" deferrable="1" />
 <comments invalid=""><constraint name="invalid0" type="FOREIGN KEY" fields="type" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
 <comments invalid=""><constraint name="invalid1" type="FOREIGN KEY" fields="individual" reference_table="Individual" reference_fields="id" deferrable="1" /></comments>
</constraints>
<indices>
 <index name="individualpath_individual_type" type="NORMAL" fields="individual,type" />
</indices>
</table>

<table name="IndividualEmail" order="51">
<fields>
 <field name="individual" data_type="bigint" size="" is_nullable="1" order="1" />
 <field name="type" data_type="integer" size="" is_nullable="1" order="2" />
 <field name="email" data_type="integer" size="" is_nullable="1" order="3" />
 <field name="stop" data_type="timestamp" size="0" is_nullable="1" order="4">
  <comments>No longer associate this record with individual.  Used instead of DELETE.</comments>
 </field>
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
<constraints>
 <constraint name="" type="FOREIGN KEY" fields="email" reference_table="Email" reference_fields="id" deferrable="1" />
 <comments invalid=""><constraint name="invalid0" type="FOREIGN KEY" fields="type" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
 <comments invalid=""><constraint name="invalid1" type="FOREIGN KEY" fields="individual" reference_table="Individual" reference_fields="id" deferrable="1" /></comments>
</constraints>
<indices>
 <index name="individualemail_individual_type" type="NORMAL" fields="individual,type" />
</indices>
</table>

<table name="Country" order="63">
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="0" order="1" />
 <field name="name" data_type="integer" size="" is_nullable="0" order="2" />
 <field name="code" data_type="varchar" size="4" is_nullable="1" order="3">
  <comments>Long ISO Country code. See http://countrycode.org/</comments>
 </field>
 <field name="idd" data_type="varchar" size="8" is_nullable="1" order="4">
  <comments>International Dialing Prefix. See http://countrycode.org/</comments>
 </field>
 <field name="ndd" data_type="varchar" size="4" is_nullable="1" order="5">
  <comments>Country Code. See http://countrycode.org/</comments>
 </field>
 <field name="location" data_type="integer" size="" is_nullable="1" order="6">
  <comments>For center of country only</comments>
 </field>
</fields>
<constraints>
 <constraint name="" type="FOREIGN KEY" fields="location" reference_table="Location" reference_fields="id" deferrable="1" />
 <comments invalid=""><constraint name="invalid0" type="FOREIGN KEY" fields="name" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
</constraints>
<indices>
 <index name="country_name" type="UNIQUE" fields="name" />
</indices>
</table>

<table name="Phone" order="64">
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="1" order="1" />
 <field name="country" data_type="integer" size="" is_nullable="0" default_value="1" order="3">
  <comments>Default to USA</comments>
 </field>
 <field name="location" data_type="integer" size="" is_nullable="1" order="2" />
 <field name="area" data_type="varchar" size="4" is_nullable="0" order="3">
  <comments>Strip out all formatting characters.</comments>
 </field>
 <field name="number" data_type="varchar" size="10" is_nullable="0" order="4">
  <comments>Strip out all formatting characters.</comments>
 </field>
</fields>
<constraints>
 <constraint name="" type="FOREIGN KEY" fields="country" reference_table="Country" reference_fields="id" deferrable="1" />
 <constraint name="" type="FOREIGN KEY" fields="location" reference_table="Location" reference_fields="id" deferrable="1" />
</constraints>
<indices>
 <index name="phone_country_area_number" type="UNIQUE" fields="country,area,number" />
</indices>
</table>

<table name="IndividualPhone" order="65">
<fields>
 <field name="individual" data_type="bigint" size="" is_nullable="1" order="1" />
 <field name="type" data_type="integer" size="" is_nullable="1" order="2" />
 <field name="phone" data_type="integer" size="" is_nullable="1" order="3" />
 <field name="stop" data_type="timestamp" size="0" is_nullable="1" order="4">
  <comments>No longer associate this record with individual.  Used instead of DELETE.</comments>
 </field>
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
<constraints>
 <constraint name="" type="FOREIGN KEY" fields="phone" reference_table="Phone" reference_fields="id" deferrable="1" />
 <comments invalid=""><constraint name="invalid0" type="FOREIGN KEY" fields="type" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
 <comments invalid=""><constraint name="invalid1" type="FOREIGN KEY" fields="individual" reference_table="Individual" reference_fields="id" deferrable="1" /></comments>
</constraints>
<indices>
 <index name="individualphone_individual_type" type="NORMAL" fields="individual,type" />
</indices>
</table>

<table name="Postal" order="70">
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="1" order="1" />
 <field name="country" data_type="integer" size="" is_nullable="0" order="2" />
 <field name="code" data_type="varchar" size="10" is_nullable="0" order="3" />
 <field name="state" data_type="integer" size="" is_nullable="0" order="4">
  <comments>Province Territory or Zone</comments>
 </field>
 <field name="stateAbbreviation" data_type="integer" size="" is_nullable="0" order="5" />
 <field name="county" data_type="integer" size="" is_nullable="0" order="6">
  <comments>Province</comments>
 </field>
 <field name="city" data_type="integer" size="" is_nullable="0" order="7">
  <comments>Township</comments>
 </field>
 <field name="location" data_type="integer" size="" is_nullable="1" order="8" />
</fields>
<constraints>
 <constraint name="" type="FOREIGN KEY" fields="country" reference_table="Country" reference_fields="id" deferrable="1" />
 <comments invalid=""><constraint name="invalid0" type="FOREIGN KEY" fields="state" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
 <comments invalid=""><constraint name="invalid1" type="FOREIGN KEY" fields="stateAbbreviation" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
 <comments invalid=""><constraint name="invalud2" type="FOREIGN KEY" fields="county" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
 <comments invalid=""><constraint name="invalud3" type="FOREIGN KEY" fields="city" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
 <constraint name="" type="FOREIGN KEY" fields="location" reference_table="Location" reference_fields="id" deferrable="1" />
</constraints>
<indices>
 <index name="postal_country_code" type="UNIQUE" fields="country,code" />
</indices>
</table>

<table name="Address" order="71">
<fields>
 <comments>A lot of work needs to be done to be sure duplicate addresses are not entered.  This work will be centered around validation and the AddressAttribute table.</comments>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="0" is_foreign_key="0" order="1" />
 <field name="line1" data_type="varchar" size="50" is_nullable="1" order="2" />
 <field name="line2" data_type="varchar" size="50" is_nullable="1" order="3" />
 <field name="line3" data_type="varchar" size="50" is_nullable="1" order="4" />
 <field name="line4" data_type="varchar" size="50" is_nullable="1" order="5" />
 <field name="postal" data_type="integer" size="" is_nullable="1" order="6" />
 <field name="postalPlus" data_type="varchar" size="4" is_nullable="1" order="7" />
 <field name="location" data_type="integer" size="" is_nullable="1" order="8" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="9" />
</fields>
<constraints>
 <constraint name="" type="FOREIGN KEY" fields="postal" reference_table="Postal" reference_fields="id" deferrable="1" />
 <constraint name="" type="FOREIGN KEY" fields="location" reference_table="Location" reference_fields="id" deferrable="1" />
</constraints>
<indices>
 <index name="address_postal_postalplus_location" type="NORMAL" fields="postal, postalPlus, location" />
</indices>
</table>

<table name="Version" order="100">
<comments>untested</comments>
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="1" order="1" />
 <field name="name" data_type="integer" size="" is_nullable="1" order="2" />
 <field name="major" data_type="integer" size="" is_nullable="1" order="3" />
 <field name="minor" data_type="integer" size="" is_nullable="1" order="4" />
 <field name="patch" data_type="integer" size="" is_nullable="1" order="5" />
</fields>
<indices>
 <index name="version_name_major_minor_patch" type="UNIQUE" fields="name,major,minor,patch" />
</indices>
<constraints>
 <comments invalid=""><constraint name="invalid0" type="FOREIGN KEY" fields="name" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
 <comments invalid=""><constraint name="invalid1" type="FOREIGN KEY" fields="major" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
 <comments invalid=""><constraint name="invalid2" type="FOREIGN KEY" fields="minor" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
 <comments invalid=""><constraint name="invalid3" type="FOREIGN KEY" fields="patch" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
</constraints>
</table>

<table name="Release" order="110">
<comments>untested</comments>
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0"	is_auto_increment="1" is_primary_key="1" is_foreign_key="0" order="1" />
 <field name="version" data_type="integer" size="" is_nullable="1" order="2" />
 <field name="build" data_type="integer" size="" is_nullable="1" order="3" />
 <field name="name" data_type="integer" size="" is_nullable="1" order="4">
  <comments>Tag name/Branch</comments>
 </field>
 <field name="path" data_type="bigint" size="" is_nullable="1" order="5">
  <comments>Repository path</comments>
 </field>
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
<indices>
 <index name="release_version_build" type="UNIQUE" fields="version,build" />
</indices>
<constraints>
 <constraint name="" type="FOREIGN KEY" fields="version" reference_table="Version" reference_fields="id" deferrable="1" />
 <comments invalid=""><constraint name="invalid0" type="FOREIGN KEY" fields="build" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
 <comments invalid=""><constraint name="invalid1" type="FOREIGN KEY" fields="name" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
 <constraint name="" type="FOREIGN KEY" fields="path" reference_table="Path" reference_fields="id" deferrable="1" />
</constraints>
</table>

<table name="Application" order="120">
<comments>untested</comments>
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="0" order="1" />
 <field name="name" data_type="integer" size="" is_nullable="1" order="2" />
 <field name="goesBy" data_type="varchar" size="40" is_nullable="1" order="3" />
 <field name="path" data_type="bigint" size="" is_nullable="1" order="4" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
<indices>
 <index name="application_name" type="UNIQUE" fields="name" />
</indices>
<constraints>
 <comments invalid=""><constraint name="invalid0" type="FOREIGN KEY" fields="name" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
 <constraint name="" type="FOREIGN KEY" fields="path" reference_table="Path" reference_fields="id" deferrable="1" />
</constraints>
</table>

<table name="ApplicationRelease" order="121">
<comments>untested</comments>
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="0" order="1" />
 <field name="application" data_type="integer" size="" is_nullable="1" order="2" />
 <field name="release" data_type="integer" size="" is_nullable="1" order="3" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
<indices>
 <index name="application_release" type="UNIQUE" fields="application,release" />
</indices>
<constraints>
 <constraint name="" type="FOREIGN KEY" fields="application" reference_table="Application" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
 <constraint name="" type="FOREIGN KEY" fields="release" reference_table="Release" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
</constraints>
</table>

<table name="Part" order="130">
<comments>untested</comments>
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="1" order="1" />
 <field name="parent" data_type="integer" size="" is_nullable="1" order="2" />
 <field name="name" data_type="integer" size="" is_nullable="1" order="3" />
 <field name="version" data_type="integer" size="" is_nullable="1" order="4" />
 <field name="serial" data_type="varchar" is_nullable="1" order="5" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
<indices>
 <index name="part_parent_name_version_serial" type="UNIQUE" fields="parent,name,version,serial" />
</indices>
<constraints>
 <constraint name="" type="FOREIGN KEY" fields="parent" reference_table="Part" reference_fields="id" deferrable="1" />
 <comments invalid=""><constraint name="invalid0" type="FOREIGN KEY" fields="name" reference_table="Sentence" reference_fields="id" deferrable="1" /></comments>
 <constraint name="" type="FOREIGN KEY" fields="version" reference_table="Version" reference_fields="id" deferrable="1" />
</constraints>
</table>

<table name="AssemblyPart" order="131">
<comments>untested</comments>
<fields>
 <field name="assembly" data_type="integer" size="" is_nullable="1" order="1" />
 <field name="part" data_type="integer" size="" is_nullable="1" order="2" />
 <field name="designator" data_type="integer" size="" is_nullable="1" order="3" />
 <field name="quantity" data_type="integer" size="" is_nullable="1" order="4" />
</fields>
<constraints>
 <constraint name="" type="FOREIGN KEY" fields="assembly" reference_table="Part" reference_fields="id" deferrable="1" />
 <constraint name="" type="FOREIGN KEY" fields="part" reference_table="Part" reference_fields="id" deferrable="1" />
 <comments invalid=""><constraint name="invalid0" type="FOREIGN KEY" fields="designator" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
</constraints>
</table>

<table name="PartDescription" order="132">
<fields>
 <field name="part" data_type="integer" size="" is_nullable="1" order="2" />
 <field name="description" data_type="integer" size="" is_nullable="1" order="3" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
<constraints>
  <constraint name="" type="FOREIGN KEY" fields="part" reference_table="Part" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
 <comments invalid=""><constraint name="invalid1" type="FOREIGN KEY" fields="description" reference_table="Paragraph" reference_fields="id" deferrable="1" /></comments>
</constraints>
</table>

<comments>A client device and its operating system. Change to AssemblyApplicationRelease</comments>
<table name="AssemblyApplicationRelease" order="140">
<comments>untested</comments>
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="0" order="1" />
 <field name="parent" data_type="integer" size="" is_nullable="1" order="2" />
 <field name="assembly" data_type="integer" size="" is_nullable="1" order="3" />
 <field name="applicationRelease" data_type="integer" size=""	is_nullable="1" order="4" />
 <field name="name" data_type="integer" size="" is_nullable="1" order="5" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
<indices>
 <index name="AssemblyApplicationRelease_assembly_applicationRelease_parent" type="UNIQUE" fields="assembly,applicationRelease,parent" />
</indices>
<constraints>
 <constraint name="" type="FOREIGN KEY" fields="parent" reference_table="AssemblyApplicationRelease" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
 <constraint name="" type="FOREIGN KEY" fields="assembly" reference_table="Part" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
 <constraint name="" type="FOREIGN KEY" fields="applicationRelease" reference_table="ApplicationRelease" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
 <comments invalid=""><constraint name="invalid0" type="FOREIGN KEY" fields="name" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
</constraints>
</table>

<table name="Site" order="200">
<comments>untested</comments>
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="0" order="1" />
 <field name="name" data_type="integer" size="" is_nullable="1" order="2" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
<constraints>
 <comments invalid=""><constraint name="invalid0" type="FOREIGN KEY" fields="name" reference_table="Sentence" reference_fields="id" deferrable="1" /></comments>
</constraints>
</table>


<comments>Information about when etc. site got particular released application</comments>
<table name="SiteApplicationRelease" order="210">
<comments>untested</comments>
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="0" order="1" />
 <field name="site" data_type="integer" size="" is_nullable="1" order="2" />
 <field name="applicationRelease" data_type="integer" size="" is_nullable="1" order="3" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
<constraints>
 <constraint name="" type="FOREIGN KEY" fields="site" reference_table="Site" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
 <constraint name="" type="FOREIGN KEY" fields="applicationRelease" reference_table="ApplicationRelease" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
</constraints>
</table>

<table name="Session" order="220">
<comments>untested</comments>
<fields>
 <field name="id" data_type="bigint" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="0" order="1" />
 <field name="lock" data_type="integer" size="" default_value="0" is_nullable="0" order="3">
  <comments>Mono System.Web/ASPState.sql style locks</comments>
 </field>
 <field name="touched" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="98" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
<indices>
</indices>
<constraints>
</constraints>
</table>

<table name="SessionToken" order="222">
<comments>untested</comments>
<fields>
 <field name="session" data_type="bigint" size="" is_nullable="0" is_primary_key="0" is_foreign_key="0" order="1" />
 <field name="token" data_type="varchar" size="32" is_nullable="0" is_foreign_key="0" order="1" />
 <field name="siteApplicationRelease" data_type="integer" size="" is_nullable="1" order="2" />
 <field name="initialized" data_type="smallint" size="1" is_nullable="1" order="3" />
 <field name="timeout" data_type="integer" size="" is_nullable="1" order="4" />
 <field name="items" data_type="bytea" size="10" is_nullable="1" order="5" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
<indices>
 <index name="sesstionToken_session_siteApplicationRelease" type="UNIQUE" fields="session,siteApplicationRelease" />
</indices>
<constraints>
 <constraint name="" type="FOREIGN KEY" fields="session" reference_table="Session" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
 <constraint name="" type="FOREIGN KEY" fields="siteApplicationRelease" reference_table="SiteApplicationRelease" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
</constraints>
</table>

<table name="Password" order="230">
<comments>untested</comments>
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="0" order="1" />
 <field name="provider" data_type="bigint" size="" is_nullable="1" order="2" />
 <field name="generator" data_type="integer" size="" is_nullable="1" order="3" />
 <field name="value" data_type="varchar" size="255" is_nullable="1" order="4" />
 <field name="name" data_type="integer" size="" is_nullable="1" order="5" />
 <field name="revoked" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="98" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
<constraints>
 <comments invalid=""><constraint name="invalid0" type="FOREIGN KEY" fields="provider" reference_table="Individual" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" /></comments>
 <constraint name="" type="FOREIGN KEY" fields="generator" reference_table="ApplicationRelease" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
 <comments invalid=""><constraint name="invalid1" type="FOREIGN KEY" fields="name" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
</constraints>
</table>

<table name="Credential" order="231">
<comments>untested</comments>
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="0" order="1" />
 <field name="individual" data_type="bigint" size="" is_nullable="1" order="2" />
 <field name="username" data_type="varchar" size="20" is_nullable="1" order="3" />
 <field name="email" data_type="integer" size="" is_nullable="1" order="4" />
 <field name="password" data_type="integer" size="" is_nullable="1" order="5" />
 <field name="culture" data_type="integer" size="" is_nullable="1" order="6" />
 <field name="revoked" data_type="timestamp" size="0" is_nullable="1" order="98" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
<constraints>
 <comments invalid=""><constraint name="invalid0" type="FOREIGN KEY" fields="individual" reference_table="Individual" reference_fields="id" deferrable="1" /></comments>
 <constraint name="" type="FOREIGN KEY" fields="email" reference_table="Email" reference_fields="id" deferrable="1" />
 <constraint name="" type="FOREIGN KEY" fields="password" reference_table="Password" reference_fields="id" deferrable="1" />
 <constraint name="" type="FOREIGN KEY" fields="culture" reference_table="Culture" reference_fields="code" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
</constraints>
</table>

<table name="AgentString" order="232">
<comments>untested</comments>
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="0" order="1" />
 <field name="agent" data_type="integer" size="" is_nullable="1" order="5">
  <comments>Browser user agent string raw</comments>
 </field>
 <field name="string" data_type="integer" size="" is_nullable="1" order="4">
  <comments>Browser user agent string parsed</comments>
 </field>
</fields>
<indices>
 <index name="agentString_agent_string" type="UNIQUE" fields="agent,string" />
</indices>
<constraints>
 <constraint name="" type="FOREIGN KEY" fields="agent" reference_table="AssemblyApplicationRelease" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
 <comments invalid=""><constraint name="invalid1" type="FOREIGN KEY" fields="string" reference_table="Sentence" reference_fields="id" deferrable="1" /></comments>
</constraints>
</table>

<table name="SessionCredential" order="233">
<comments>untested</comments>
<fields>
 <field name="id" data_type="bigint" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="0" order="1" />
 <field name="session" data_type="bigint" size="" is_nullable="0" order="2" />
 <field name="agentString" data_type="integer" size="" is_nullable="1" order="4" />
 <field name="credential" data_type="integer" size="" is_nullable="1" order="5" />
 <field name="referring" data_type="bigint" size="" is_nullable="1" order="6" />
 <field name="fromAddress" data_type="inet" size="19" is_nullable="1" order="7" />
 <field name="location" data_type="integer" size="" is_nullable="1" order="8" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
<constraints>
 <constraint name="" type="FOREIGN KEY" fields="session" reference_table="Session" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
 <constraint name="" type="FOREIGN KEY" fields="agentString" reference_table="AgentString" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
 <constraint name="" type="FOREIGN KEY" fields="credential" reference_table="Credential" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
 <constraint name="" type="FOREIGN KEY" fields="referring" reference_table="Path" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
 <constraint name="" type="FOREIGN KEY" fields="location" reference_table="Location" reference_fields="id" deferrable="1" />
</constraints>
</table>

<table name="Attribute" order="800">
<comments>untested</comments>
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="1" is_foreign_key="0" order="1" />
 <field name="unit" data_type="integer" size="" is_nullable="1" order="2" />
 <field name="word" data_type="integer" size="" is_nullable="1" order="3" />
 <field name="integer" data_type="integer" size="" is_nullable="1" order="4" />
 <field name="float" data_type="float" size="24" is_nullable="1" order="5" />
 <field name="dateTime" data_type="timestamp" size="0" is_nullable="1" order="6" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="10" />
</fields>
<constraints>
 <comments invalid=""><constraint name="invalid0" type="FOREIGN KEY" fields="unit" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
 <comments invalid=""><constraint name="invalid1" type="FOREIGN KEY" fields="word" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
</constraints>
</table>

<table name="RecordProperty" order="801">
<comments>untested</comments>
<fields>
 <field name="tableName" data_type="varchar" size="64" is_nullable="0" order="1" />
 <field name="tableId" data_type="bigint" size="" is_nullable="1" order="2">
  <comment>tableId is null for list of possible properties/attributes for table</comment>
 </field>
 <field name="property" data_type="integer" size="" is_nullable="0" order="3" />
 <field name="attribute" data_type="integer" size="" is_nullable="1" order="4">
  <comment>attribute is null if just a property</comment>
 </field>
 <field name="stop" data_type="timestamp" size="0" is_nullable="1" order="5" >
  <comments>No longer associate with this record.  Used instead of DELETE.</comments>
 </field>
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="10" />
</fields>
<constraints>
 <constraint name="" type="FOREIGN KEY" fields="attribute" reference_table="Attribute" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
 <comments invalid=""><constraint name="invalid0" type="FOREIGN KEY" fields="property" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
</constraints>
</table>



<table name="SchemaVersion" order="999">
<comments>untested</comments>
<fields>
 <field name="build" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="0" is_foreign_key="0" order="1" />
 <field name="schema" data_type="integer" size="" is_nullable="1" order="2" />
 <field name="version" data_type="integer" size="" is_nullable="1" order="3" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
<constraints>
 <constraint name="" type="FOREIGN KEY" fields="version" reference_table="Version" reference_fields="id" deferrable="1" />
 <comments invalid=""><constraint name="invalid0" type="FOREIGN KEY" fields="schema" reference_table="Word" reference_fields="id" deferrable="1" /></comments>
</constraints>
</table>


<comments>
Tables below are unfinished and are mostly place holders or note taking.  These should not be used and are probably completely wrong.
</comments>

<comments>Tables to define periods of time</comments>
<table name="Period" order="300">
<fields>
 <field name="id" data_type="integer" size="" is_nullable="1" is_auto_increment="0" is_primary_key="0" is_foreign_key="1" order="1" />
 <field name="span" data_type="integer" size="" is_nullable="0" is_foreign_key="1" order="2" />
 <field name="exclude" data_type="boolean" size="" is_nullable="0" default_value="false" order="3" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
</table>
<comments>Span tables share the same unique sequence id</comments>
<table name="DateRange" order="310">
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="0" is_primary_key="1" is_foreign_key="1" order="1" />
 <field name="start" data_type="timestamp" size="0" is_nullable="0" order="2" />
 <field name="stop" data_type="timestamp" size="0" is_nullable="1" order="3" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
</table>
<table name="TimeOfDay" order="311">
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="0" is_primary_key="1" is_foreign_key="1" order="1" />
 <field name="start" data_type="time" size="0" is_nullable="0" order="2" />
 <field name="stop" data_type="time" size="0" is_nullable="1" order="3" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
</table>
<table name="DayOfWeek" order="312">
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="0" is_primary_key="1" is_foreign_key="1" order="1" />
 <field name="start" data_type="smallint" size="" is_nullable="1" order="2" />
 <field name="stop" data_type="smallint" size="" is_nullable="1" order="3" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
</table>
<table name="DayOfMonth" order="313">
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="0" is_primary_key="1" is_foreign_key="1" order="1" />
 <field name="month" data_type="smallint" size="0" is_nullable="1" order="2" />
 <field name="day" data_type="smallint" size="0" is_nullable="1" order="3" />
 <field name="weekOfMonth" data_type="integer" is_nullable="1" order="4" >
  <comments>Positive or negative week in the month. 1st week, last week,  etc</comments>
 </field>
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
</table>
<table name="PeriodName" order="390">
<fields>
 <field name="period" data_type="integer" size="" is_nullable="0" is_auto_increment="0" is_primary_key="0" is_foreign_key="0" order="1" />
 <field name="name" data_type="integer" size="" is_nullable="1" order="2" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
</table>

<table name="AddressAttribute" order="72">
<comments>usps address fields for example.  address line source fields.</comments>
<fields>
 <field name="address" data_type="integer" size="" is_nullable="0" order="3" />
 <field name="attribute" data_type="integer" size="" is_nullable="0" order="3" />
 <field name="value" data_type="integer" size="" is_nullable="0" order="3" />
</fields>
</table>

<table name="IndividualAddress" order="75">
<fields>
 <field name="individual" data_type="bigint" size="" is_nullable="1" order="3" />
 <field name="type" data_type="integer" size="" is_nullable="1" order="3" />
 <field name="address" data_type="integer" size="" is_nullable="1" order="3" />
 <field name="stop" data_type="timestamp" size="0" is_nullable="1" order="3">
  <comments>No longer associate this record with individual.  Used instead of DELETE.</comments>
 </field>
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
</table>

<table name="IndividualApplicationCreated" order="211">
<fields>
 <field name="individual" data_type="bigint" size="" is_nullable="1" order="3" />
 <field name="applicationRelease" data_type="integer" size="" is_nullable="1" order="3" />
 <field name="createdBy" data_type="integer" size="" is_nullable="1" order="3" />
 <field name="stop" data_type="timestamp" size="0" is_nullable="1" order="3">
  <comments>No longer associate this record with individual.  Used instead of DELETE.</comments>
 </field>
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
</table>

<table name="IndividualSessionCreated" order="235">
<fields>
 <field name="individual" data_type="bigint" size="" is_nullable="1" order="3" />
 <field name="sessionCredential" data_type="bigint" size="" is_nullable="1" order="3" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
<constraints>
 <comments invalid=""><constraint name="invalid0" type="FOREIGN KEY" fields="individual" reference_table="Individual" reference_fields="id" deferrable="1" /></comments>
 <constraint name="" type="FOREIGN KEY" fields="sessionCredential" reference_table="SessionCredential" reference_fields="id" on_delete="" on_update="" match_type="" expression="" options="" deferrable="1" />
</constraints>
</table>




<comments>Template</comments>
<table name="unfinished" order="9999">
<fields>
 <field name="id" data_type="integer" size="" is_nullable="0" is_auto_increment="1" is_primary_key="0" is_foreign_key="0" order="1" />
 <field name="field" data_type="integer" size="" is_nullable="1" order="3" />
 <field name="created" data_type="timestamp" size="0" is_nullable="0" default_value="NOW()" order="99" />
</fields>
</table>

</tables>


<views>
 <comments>SQLFairy does not handle XML escape codes.  So need to convert post process.</comments>
 <view name="People" fields="individual,name,goesBy,birthday,in_days,fullName,honorific,given,middle,family,suffix,post,honorificvalue,givenvalue,middlevalue,familyvalue,suffixvalue,postvalue,birth,death,aged,created" order="1">
 <sql>
SELECT Individual.id AS individual, Name.id AS name,
 COALESCE(goesBy.value,Given.value,Family.value) AS goesBy,
 birthday(CAST(birth AS date),CAST(NOW() AS date)) AS birthday,
 days_until_birthday(CAST(birth AS date), CAST(NOW() AS date)) AS in_days,
 COALESCE(honorific.value,!apos;!apos;) ||
  COALESCE(CASE WHEN (honorific.value IS NOT NULL) THEN !apos; !apos; ELSE !apos;!apos; END || Given.value,!apos;!apos;) ||
  COALESCE(CASE WHEN (Given.value IS NOT NULL) THEN !apos; !apos; ELSE !apos;!apos; END || middle.value,!apos;!apos;) ||
  COALESCE(CASE WHEN (middle.value IS NOT NULL) THEN !apos; !apos; ELSE !apos;!apos; END  || Family.value,!apos;!apos;) ||
  COALESCE(CASE WHEN (Family.value IS NOT NULL) THEN !apos; !apos; ELSE !apos;!apos; END || suffix.value,!apos;!apos;) ||
  COALESCE(CASE WHEN (suffix.value IS NOT NULL) THEN !apos; !apos; ELSE !apos;!apos; END || post.value,!apos;!apos;)
  AS fullName,
 Individual.prefix AS honorific,
 Name.given, Name.middle, Name.family,
 Individual.suffix,
 Individual.post,
 honorific.value AS honorificValue,
 Given.value AS GivenValue, middle.value AS middleValue, Family.value AS FamilyValue,
 suffix.value AS suffixValue,
 post.value AS postValue,
 birth, death,
 COALESCE(age(death,birth),age(birth)) AS aged,
 Individual.created
FROM Individual
JOIN Name ON Name.id = Individual.name
LEFT JOIN Given ON Given.id = Name.given
LEFT JOIN Given AS middle ON middle.id = Name.middle
LEFT JOIN Given AS goesBy ON goesBy.id = Individual.goesBy
LEFT JOIN Family ON Family.id = Name.family
LEFT JOIN Word AS honorific ON honorific.id = Individual.prefix
 AND honorific.culture = 1033
LEFT JOIN Word AS suffix ON suffix.id = Individual.suffix
 AND suffix.culture = 1033
LEFT JOIN Word AS post ON post.id = Individual.post
 AND post.culture = 1033
WHERE Individual.nameChange IS NULL
 OR Individual.nameChange > NOW()
 </sql>
 </view>

 <view name="IndividualPersonEvent" fields="individual,name,honorific,suffix,post,goesby,birth,death,event" order="2">
 <comments>
  Convert individual table transactions into individual person life events.
  Primarily as an input to the PeopleEvent view.
 </comments>
 <sql>
SELECT DISTINCT Individual.id AS individual,
 Individual.name,
 COALESCE(future.prefix, Individual.prefix) AS honorific,
 COALESCE(future.suffix, Individual.suffix) AS suffix,
 COALESCE(future.post, Individual.post) AS post,
 COALESCE(future.goesBy, Individual.goesBy) AS goesBy,
 Individual.birth,
 Individual.death,
 CASE WHEN previous.id IS NULL THEN
  -- Check for single event
  CASE WHEN future.id IS NULL THEN
   COALESCE(Individual.death,Individual.nameChange,Individual.birth)
  ELSE
   -- Check for individual attribute change only
   CASE WHEN (future.goesBy != Individual.goesBy)
     OR (future.goesBY IS NOT NULL AND Individual.goesBy IS NULL)
     OR (future.goesBY IS NULL AND Individual.goesBy IS NOT NULL)
     OR (future.prefix != Individual.prefix)
     OR (future.prefix IS NOT NULL AND Individual.prefix IS NULL)
     OR (future.prefix IS NULL AND Individual.prefix IS NOT NULL)
     OR (future.suffix != Individual.suffix)
     OR (future.suffix IS NOT NULL AND Individual.suffix IS NULL)
     OR (future.suffix IS NULL AND Individual.suffix IS NOT NULL)
     OR (future.post != Individual.post)
     OR (future.post IS NOT NULL AND Individual.post IS NULL)
     OR (future.post IS NULL AND Individual.post IS NOT NULL)
   THEN
    -- individual attriute change only
    Individual.nameChange
   ELSE
    Individual.birth
   END
  END
 ELSE
  CASE WHEN future.id IS NULL THEN
   COALESCE(Individual.death,previous.nameChange,Individual.nameChange,Individual.birth)
  ELSE
   Individual.nameChange
  END
 END AS event
FROM Individual
CROSS JOIN Name
LEFT JOIN Individual AS previous ON previous.id = Individual.id
 AND (
  (COALESCE(previous.nameChange,previous.death) !lt; COALESCE(Individual.nameChange,Individual.death))
  OR
  (Individual.death IS NULL AND Individual.nameChange IS NULL
   AND previous.nameChange IS NOT NULL)
 )
LEFT JOIN Individual AS future ON future.id = Individual.id
 AND COALESCE(future.nameChange,future.birth) !gt;= COALESCE(Individual.nameChange,Individual.death)
 AND future.death IS NULL
WHERE Name.id = Individual.name
 </sql>
 </view>

 <view name="PeopleEvent" fields="individual,name,goesby,fullname,date,event,eventname,honorific,given,middle,family,suffix,post,honorificvalue,givenvalue,middlevalue,familyvalue,suffixvalue,postvalue" order="3">
 <sql>
SELECT IndividualPersonEvent.individual, IndividualPersonEvent.name,
 COALESCE(goesBy.value,Given.value,Family.value) AS goesBy,
 COALESCE(honorific.value || !apos; !apos;,!apos;!apos;) ||
  COALESCE(Given.value || !apos; !apos;,!apos;!apos;) ||
  COALESCE(middle.value || !apos; !apos;,!apos;!apos;) ||
  COALESCE(Family.value || !apos; !apos;,!apos;!apos;) ||
  COALESCE(suffix.value || !apos; !apos;,!apos;!apos;) ||
  COALESCE(post.value || !apos; !apos;,!apos;!apos;)
  AS fullName,
 event AS date,
 COALESCE(born.id, death.id, change.id) AS event,
 COALESCE(born.value, death.value, change.value) AS eventName,
 IndividualPersonEvent.honorific,
 Name.given,
 Name.middle,
 Name.family,
 IndividualPersonEvent.suffix,
 IndividualPersonEvent.post,
 honorific.value AS honorificValue,
 Given.value AS GivenValue,
 middle.value AS middleValue,
 Family.value AS FamilyValue,
 suffix.value AS suffixValue,
 post.value AS postValue
FROM IndividualPersonEvent
 JOIN Name ON Name.id = IndividualPersonEvent.name
 LEFT JOIN Given On Given.id = Name.given
 LEFT JOIN Given AS middle ON middle.id = Name.middle
 LEFT JOIN Given AS goesBy ON goesBy.id = IndividualPersonEvent.goesBy
 LEFT JOIN Family ON Family.id = Name.family
 LEFT JOIN Word AS honorific ON honorific.id = IndividualPersonEvent.honorific
  AND honorific.culture = 1033
 LEFT JOIN Word AS suffix ON suffix.id = IndividualPersonEvent.suffix
  AND suffix.culture = 1033
 LEFT JOIN Word AS post ON post.id = IndividualPersonEvent.post
  AND post.culture = 1033
 LEFT JOIN Word AS born ON born.value = !apos;Born!apos; AND born.culture = 1033 AND birth = event
 LEFT JOIN Word AS death ON death.value = !apos;Died!apos; AND death.culture  = 1033 AND death = event
 LEFT JOIN Word AS change ON change.value = !apos;Changed name!apos; AND change.culture  = 1033
 </sql>
 </view>

 <view name="Entities" fields="individual,entity,goesBy,name,formed,dissolved,aged,created" order="20">
  <sql>
SELECT Individual.id AS individual, Individual.entity, goesBy.value AS goesBy,
 Entity.name, Individual.birth AS formed, Individual.death AS dissolved,
 COALESCE(age(death,birth),age(birth)) AS aged,
 Individual.created
FROM Individual
JOIN Entity ON Entity.id = Individual.entity
LEFT JOIN Given AS goesBy ON goesBy.id = Individual.goesBy
WHERE Individual.nameChange IS NULL
  </sql>
 </view>
 <view name="List" fields="id,individual,name,namevalue,set,setvalue,sequence" order="30">
  <sql>
SELECT IndividualList.id,
 IndividualList.individual,
 IndividualListName.name AS listName,
 Name.value AS listNameValue,
 IndividualListName.set,
 Set.value AS setValue,
 IndividualListName.sequence,
 IndividualList.created
FROM IndividualList
JOIN IndividualListName ON IndividualListName.IndividualList = IndividualList.id
 AND IndividualListName.optinStyle = 1
JOIN Word AS Name ON IndividualListName.name = Name.id
 AND Name.culture = 1033
LEFT JOIN Word AS Set ON IndividualListName.set = Set.id
 AND Set.culture = 1033
LEFT JOIN IndividualList AS disable ON disable.individual = IndividualList.individual
 AND disable.id IS NULL
 AND disable.unlist IS NULL
WHERE disable.individual IS NULL
 AND IndividualList.unlist IS NULL
  </sql>
 </view>
 <view name="EmailAddress" fields="email,username,plus,host,value">
 <sql>
SELECT id AS email, username, plus, host,
 username ||
 COALESCE(!apos;+!apos; || plus, !apos;!apos;) ||
 !apos;@!apos; || host AS value
FROM Email
 </sql>
 </view>
 <view name="URL" fields="path,protocol,host,value,created">
  <sql>
SELECT id AS path, protocol, host,
 protocol ||
 CASE WHEN secure = 1 THEN !apos;s!apos; ELSE !apos;!apos; END ||
 !apos;://!apos; || host || !apos;/!apos; ||
 COALESCE(value,!apos;!apos;) ||
 CASE WHEN get IS NULL
 THEN !apos;!apos;
 ELSE !apos;?!apos; || get
 END AS value,
 created
FROM Path
  </sql>
 </view>
 <view name="file" fields="path,protocol,host,value,file,created">
  <sql>
SELECT id AS path, protocol, host,
 protocol ||
 !apos;:///!apos; ||
 COALESCE(value,!apos;!apos;) ||
 CASE WHEN value IS NOT NULL
 THEN !apos;/!apos;
 ELSE !apos;!apos;
 END ||
 COALESCE(get,!apos;!apos;)
 AS value,
 !apos;/!apos; ||
 COALESCE(value,!apos;!apos;) ||
 CASE WHEN value IS NOT NULL
 THEN !apos;/!apos;
 ELSE !apos;!apos;
 END ||
 COALESCE(get,!apos;!apos;)
 AS file,
 created
FROM Path
  </sql>
 </view>
 <view name="IndividualURL" fields="individual,type,path,protocol,host,value,created">
  <sql>
WITH latest (individual,type,created) AS (
 SELECT individual, type, MAX(created) AS created
 FROM IndividualPath
 WHERE IndividualPath.stop IS NULL
 GROUP BY individual, type
)
SELECT latest.individual, latest.type, Path.id AS path, Path.protocol, Path.host,
 Path.protocol ||
 CASE WHEN secure = 1 THEN !apos;s!apos; ELSE !apos;!apos; END ||
 !apos;://!apos; || host || !apos;/!apos; ||
 COALESCE(Path.value,!apos;!apos;) ||
 CASE WHEN COALESCE(Path.get,IndividualPath.track) IS NULL
 THEN !apos;!apos;
 ELSE !apos;?!apos; ||
 COALESCE(Path.get,!apos;!apos;) ||
 COALESCE(CASE WHEN (Path.get IS NOT NULL AND IndividualPath.track IS NOT  NULL) THEN !apos;!amp;!apos; ELSE !apos;!apos; END ||  IndividualPath.track, !apos;!apos;)
 END AS value,
 latest.created
FROM latest
JOIN IndividualPath ON IndividualPath.individual = latest.individual
 AND IndividualPath.type = latest.type
 AND IndividualPath.created = latest.created
JOIN Individual ON Individual.id = latest.individual
 AND Individual.nameChange IS NULL
JOIN Path ON Path.id = IndividualPath.path
  </sql>
 </view>
 <view name="IndividualEmailAddress" fields="individual,type,email,username,plus,host,value,created">
  <sql>
WITH latest (individual,type,created) AS (
 SELECT individual, type, MAX(created) AS created
 FROM IndividualEmail
 WHERE IndividualEmail.stop IS NULL
 GROUP BY individual, type
)
SELECT latest.individual, latest.type, IndividualEmail.email, EmailAddress.username,
 EmailAddress.plus, EmailAddress.host, EmailAddress.value, latest.created
FROM latest
JOIN Individual ON Individual.id = latest.individual
 AND Individual.nameChange IS NULL
JOIN IndividualEmail ON IndividualEmail.individual = latest.individual
 AND IndividualEmail.type = latest.type
 AND IndividualEmail.created = latest.created
JOIN EmailAddress ON EmailAddress.email = IndividualEmail.email
  </sql>
 </view>
 <view name = "Phones" fields="phone,country,location,area,number,idd,ndd,code,local,international" >
  <sql>
SELECT Phone.id AS phone, Phone.country, Phone.location,
 Phone.area, Phone.number, Country.idd, Country.ndd,
 Country.code,
 Phone.area || !apos;-!apos; || LEFT(number,3) || !apos;-!apos; || RIGHT(number,4) AS local,
 Country.idd || !apos;-!apos; || Country.ndd || !apos;-!apos; ||   Phone.area || !apos;-!apos; || LEFT(number,3) || !apos;-!apos; || RIGHT(number,4)AS international
FROM Phone
JOIN Country ON Country.id = Phone.country
  </sql>
 </view>
 <view name="Addresses" fields="address,line1,line2,line3,city,state,zipcode,postalcode,country,countrycode,marquee,location,latitude,longitude">
  <sql>
SELECT Address.id AS address,
 line1, line2, line3,
 City.value AS city,
 UPPER(State.value) AS state,
 Postal.code ||
 CASE WHEN (postalplus IS NOT NULL) THEN !apos;-!apos; ELSE !apos;!apos; END ||
 Address.postalplus AS zipcode,
 Postal.code AS postalcode,
 Country.id AS country,
 Country.code AS countrycode,
 COALESCE(AddressLocation.marquee, PostalLocation.marquee, CountryLocation.marquee) AS marquee,
 COALESCE(AddressLocation.id, PostalLocation.id, CountryLocation.id) AS location,
 COALESCE(AddressLocation.latitude, PostalLocation.latitude, CountryLocation.latitude) AS latitude,
 COALESCE(AddressLocation.longitude, PostalLocation.longitude, CountryLocation.longitude) AS longitude
FROM Address
JOIN Postal ON Postal.id = Address.postal
JOIN Country ON Country.id = Postal.country
JOIN Word AS City ON City.id = Postal.city
JOIN Word AS State ON State.id = Postal.stateAbbreviation
LEFT JOIN Location AS AddressLocation On AddressLocation.id = Address.location
LEFT JOIN Location AS PostalLocation ON PostalLocation.id = Postal.location
LEFT JOIN Location AS CountryLocation ON CountryLocation.id = Country.location
  </sql>
 </view>
 <view name="Versions" fields="version,name,value,major,minor,patch">
  <sql>
SELECT Version.id AS version, name.value AS name,
 major.value ||
 COALESCE(!apos;.!apos; || minor.value, !apos;!apos;) ||
 COALESCE(!apos;.!apos; || patch.value, !apos;!apos;)
 AS value,
 major.value AS major, minor.value AS minor, patch.value AS patch
FROM Version
LEFT JOIN Word AS name ON name.id = Version.name
 AND name.culture = 1033
LEFT JOIN Word AS major ON major.id = Version.major
 AND major.culture = 1033
LEFT JOIN Word AS minor ON minor.id = Version.minor
 AND minor.culture = 1033
LEFT JOIN Word AS patch ON patch.id = Version.patch
 AND patch.culture = 1033
  </sql>
 </view>
 <view name="Parts" fields="part,parent,name,nameId,version,versionId,serial,created">
  <sql>
SELECT Part.id AS part, Part.parent,
 Sentence.value AS name, Part.name AS nameId,
 CASE WHEN (Versions.name IS NOT NULL) THEN Versions.name ELSE !apos;!apos; END ||
 CASE WHEN (Versions.name IS NOT NULL) THEN !apos; !apos; ELSE !apos;!apos; END ||
 CASE WHEN (Versions.value IS NOT NULL) THEN Versions.value ELSE !apos;!apos; END AS version,
 Part.version AS versionId,
 Part.serial, Part.created
FROM Part
JOIN Sentence ON Sentence.id = Part.name
 AND Sentence.culture = 1033
LEFT JOIN Versions ON Versions.version = Part.version
  </sql>
 </view>
 <view name="Assemblies" fields="assembly, parentName, name, version, serial">
  <sql>
SELECT DISTINCT AssemblyPart.assembly, parent.name AS parentName,
 assemblies.name, assemblies.version, assemblies.serial
FROM AssemblyPart
JOIN Parts AS assemblies ON assemblies.part = AssemblyPart.assembly
JOIN Parts AS parent ON parent.part = assemblies.parent
  </sql>
 </view>
 <view name="AssemblyParts" fields="assembly, parentName, assemblyName, assemblyVersion, designator, partName, partVersion, serial">
  <sql>
SELECT AssemblyPart.assembly, parent.name AS parentName,
 assemblies.name AS assemblyName, assemblies.version AS assemblyVersion,
 designator.value AS designator,
 parts.name AS partName, parts.version AS partVersion,
 parts.serial
FROM AssemblyPart
JOIN Parts AS assemblies ON assemblies.part = AssemblyPart.assembly
JOIN Parts AS parent ON parent.part = assemblies.parent
JOIN Parts AS parts ON parts.part = AssemblyPart.part
LEFT JOIN Word AS designator ON designator.id = AssemblyPart.designator
 AND designator.culture = 1033
  </sql>
 </view>
</views>
<triggers></triggers>
<procedures></procedures>
</schema>
